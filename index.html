<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ultimate Bed Championship: Definitive Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Montserrat:wght@300;600;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="start-screen" class="overlay">
        <h1 class="main-title">CHAMPIONSHIP<br>WRESTLING</h1>
        
        <div class="belt-display">
            <div class="belt-label">REIGNING CHAMPION</div>
            <div id="champ-name">VACANT</div>
            <div id="champ-stats">Series Tied 0-0</div>
        </div>

        <div class="settings-row">
            <input type="checkbox" id="silent-mode">
            <label for="silent-mode">Silent Mode</label>
        </div>

        <button class="btn-menu" onclick="App.init()">START MATCH</button>
        <button onclick="App.resetData()" class="btn-reset">Reset History</button>
        <p id="load-error" style="display:none;color:#ff8fa3;margin-top:12px;font-weight:700;"></p>
    </div>

    <div id="strip-screen" class="overlay" style="display:none;">
        <div class="strip-title" id="strip-player-name">PLAYER</div>
        <div class="strip-subtitle">WARDROBE MALFUNCTION</div>
        <div class="strip-item" id="strip-item-name">ITEM</div>
        <button class="btn-menu" onclick="App.confirmStrip()">DONE</button>
    </div>

    <div id="kickout-overlay" class="overlay" style="display:none;">
        <h1 id="kickout-title">PINFALL!</h1>
        <button id="btn-kickout" onclick="App.attemptKickout()">TAP TO<br>ESCAPE!</button>
        <p id="kickout-sub">ONE TAP TO SURVIVE</p>
    </div>

    <div id="punishment-screen" class="overlay" style="display:none;">
        <h1 class="punish-header">GAME OVER!</h1>
        <p id="punish-msg">Select Punishment Category</p>
        <div id="punish-options">
            <button class="btn-menu" onclick="App.spinPunishment('sensual')">Sensual</button>
            <button class="btn-menu" onclick="App.spinPunishment('domination')">Domination</button>
            <button class="btn-menu" onclick="App.spinPunishment('erotic')">Erotic</button>
            <button class="btn-menu" onclick="App.spinPunishment('playful')">Playful</button>
        </div>
        <div id="punish-result" style="display:none;">
            <h2 id="punish-title"></h2>
            <p id="punish-desc"></p>
            <button class="btn-menu" onclick="location.reload()">REMATCH</button>
        </div>
    </div>

    <div id="hud">
        <div class="player-card">
            <div class="name-tag" style="color:var(--p1-color)">WAYNE <span id="p1-falls"></span></div>
            <div class="stats-tag" id="p1-stats">0 Wins</div>
            <div class="clothing-tag" id="p1-clothing">Fully Clothed</div>
            <div class="bar-frame"><div id="p1-bar" class="health-fill"></div></div>
        </div>
        
        <div class="player-card right-align">
            <div class="name-tag" style="color:var(--p2-color)"><span id="p2-falls"></span> CINDY</div>
            <div class="stats-tag" id="p2-stats">0 Wins</div>
            <div class="clothing-tag" id="p2-clothing">Fully Clothed</div>
            <div class="bar-frame"><div id="p2-bar" class="health-fill"></div></div>
        </div>
    </div>

    <div id="arena">
        <div id="stipulation-banner">Standard Rules</div>
        <div id="event-badge">EVENT</div>
        
        <img id="main-image" src="" alt="Move">
        
        <div id="instruction-text">Initializing...</div>
        <div id="sub-text"></div>
    </div>

    <div id="timer-strip"><div id="timer-fill"></div></div>

    <div id="controls-area">
        <button id="btn-success" class="btn-game" onclick="App.handleSuccess()">SUBMITTED</button>
        <button id="btn-reversal" class="btn-game" onclick="App.handleReversal()">REVERSED<br>SURVIVED</button>
        <button id="btn-tapout" class="btn-game" onclick="App.handleTapOut()">I TAP OUT (GIVE UP ROUND)</button>
    </div>

    <script src="JS/moves.js"></script>
    <script src="JS/secrets.js"></script>
    <script src="JS/mechanics.js"></script>

    <script>window.onload = function() { App.loadHistory(); };</script>

    <!-- Runtime loader check: helpful on GitHub Pages to detect missing/case-mismatched files -->
    <script>
    (function(){
        const startBtn = document.querySelector('#start-screen .btn-menu');
        const errEl = document.getElementById('load-error');

        function showError(msg){
            console.error(msg);
            if(errEl){ errEl.style.display = 'block'; errEl.innerText = msg; }
            if(startBtn){ startBtn.disabled = true; }
        }

        // Quick sanity checks
        if(!window.App || typeof window.App.init !== 'function'){
            // Try to probe expected script files for 404s
            const scripts = ['JS/moves.js', 'JS/secrets.js', 'JS/mechanics.js'];
            Promise.all(scripts.map(s => fetch(s, { method: 'HEAD' }).then(r => ({src: s, ok: r.ok, status: r.status})).catch(e => ({src: s, ok: false, status: 'network error'}))))
            .then(results => {
                const missing = results.filter(r => !r.ok);
                if(missing.length){
                    showError('Loading error: missing script(s): ' + missing.map(m=>m.src+ ' ('+m.status+')').join(', ')+'. Check file paths and casing.');
                } else {
                    showError('App did not initialize correctly. Check console for errors.');
                }
            });
        }
    })();
    </script>
</body>
</html>